<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>signl: effect_manager Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">signl
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classeffect__manager.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classeffect__manager-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">effect_manager Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Class used to load external effect plugins.  
 <a href="classeffect__manager.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="effect__manager_8h_source.html">effect_manager.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for effect_manager:</div>
<div class="dyncontent">
<div class="center"><img src="classeffect__manager__coll__graph.png" border="0" usemap="#effect__manager_coll__map" alt="Collaboration graph"/></div>
<map name="effect__manager_coll__map" id="effect__manager_coll__map">
<area shape="rect" title="Class used to load external effect plugins." alt="" coords="39,303,163,329"/>
<area shape="rect" title=" " alt="" coords="5,199,196,240"/>
<area shape="rect" href="structeffect__manager_1_1plugin.html" title="Structure representing a loaded external plugin." alt="" coords="15,109,187,136"/>
<area shape="rect" href="structeffect.html" title="Abstract class representing a audio effect." alt="" coords="71,5,130,32"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structeffect__manager_1_1plugin.html">plugin</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure representing a loaded external plugin.  <a href="structeffect__manager_1_1plugin.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ae86ee71fd2700a0d0fc960b970f5e424"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeffect__manager.html#ae86ee71fd2700a0d0fc960b970f5e424">effect_manager</a> (std::string path, std::string ext=&quot;.so&quot;)</td></tr>
<tr class="memdesc:ae86ee71fd2700a0d0fc960b970f5e424"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create an instance of a effect manager.  <a href="classeffect__manager.html#ae86ee71fd2700a0d0fc960b970f5e424">More...</a><br /></td></tr>
<tr class="separator:ae86ee71fd2700a0d0fc960b970f5e424"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab56e8682b974fdacd34d90c3d79a8ac"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; <a class="el" href="structeffect.html">effect</a>, plugin_dtor_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeffect__manager.html#aab56e8682b974fdacd34d90c3d79a8ac">operator()</a> (unsigned int idx, unsigned int rate)</td></tr>
<tr class="memdesc:aab56e8682b974fdacd34d90c3d79a8ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create instance of plugin.  <a href="classeffect__manager.html#aab56e8682b974fdacd34d90c3d79a8ac">More...</a><br /></td></tr>
<tr class="separator:aab56e8682b974fdacd34d90c3d79a8ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a356319edbab2dbf47baba524e477060b"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeffect__manager.html#a356319edbab2dbf47baba524e477060b">size</a> ()</td></tr>
<tr class="memdesc:a356319edbab2dbf47baba524e477060b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of loaded plugins.  <a href="classeffect__manager.html#a356319edbab2dbf47baba524e477060b">More...</a><br /></td></tr>
<tr class="separator:a356319edbab2dbf47baba524e477060b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97bb91feb7280486e462851695a369b2"><td class="memItemLeft" align="right" valign="top"><a id="a97bb91feb7280486e462851695a369b2"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeffect__manager.html#a97bb91feb7280486e462851695a369b2">effect_manager</a> (const <a class="el" href="classeffect__manager.html">effect_manager</a> &amp;other)=delete</td></tr>
<tr class="memdesc:a97bb91feb7280486e462851695a369b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deleted copy constructor, class can only be moved. <br /></td></tr>
<tr class="separator:a97bb91feb7280486e462851695a369b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4876d72c7bba4f40c41d095f35c282d5"><td class="memItemLeft" align="right" valign="top"><a id="a4876d72c7bba4f40c41d095f35c282d5"></a>
<a class="el" href="classeffect__manager.html">effect_manager</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeffect__manager.html#a4876d72c7bba4f40c41d095f35c282d5">operator=</a> (const <a class="el" href="classeffect__manager.html">effect_manager</a> &amp;other)=delete</td></tr>
<tr class="memdesc:a4876d72c7bba4f40c41d095f35c282d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deleted copy assignment operator, class can only be moved. <br /></td></tr>
<tr class="separator:a4876d72c7bba4f40c41d095f35c282d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95da2f29dc2c074d18ca49fc9af7bfc8"><td class="memItemLeft" align="right" valign="top"><a id="a95da2f29dc2c074d18ca49fc9af7bfc8"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeffect__manager.html#a95da2f29dc2c074d18ca49fc9af7bfc8">effect_manager</a> (<a class="el" href="classeffect__manager.html">effect_manager</a> &amp;&amp;other)</td></tr>
<tr class="memdesc:a95da2f29dc2c074d18ca49fc9af7bfc8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move constructor, transfers ownership of. <br /></td></tr>
<tr class="separator:a95da2f29dc2c074d18ca49fc9af7bfc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4985223bed74b43cfa770cccae73caaf"><td class="memItemLeft" align="right" valign="top"><a id="a4985223bed74b43cfa770cccae73caaf"></a>
<a class="el" href="classeffect__manager.html">effect_manager</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeffect__manager.html#a4985223bed74b43cfa770cccae73caaf">operator=</a> (<a class="el" href="classeffect__manager.html">effect_manager</a> &amp;&amp;other)</td></tr>
<tr class="memdesc:a4985223bed74b43cfa770cccae73caaf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move assignment operator, unloads shared objects and transfers ownership of other.plugins to this. <br /></td></tr>
<tr class="separator:a4985223bed74b43cfa770cccae73caaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa330482ed0c6c989a56ff6197766021"><td class="memItemLeft" align="right" valign="top"><a id="afa330482ed0c6c989a56ff6197766021"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeffect__manager.html#afa330482ed0c6c989a56ff6197766021">~effect_manager</a> ()</td></tr>
<tr class="memdesc:afa330482ed0c6c989a56ff6197766021"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor, unloads all shared object from memory and clears <a class="el" href="classeffect__manager.html#a8e0e7af28ef77c08c5b37e13886bc78f" title="List of all plugins loaded.">plugins</a>. <br /></td></tr>
<tr class="separator:afa330482ed0c6c989a56ff6197766021"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a4624932b0a8215138eff955510512ea2"><td class="memItemLeft" align="right" valign="top"><a id="a4624932b0a8215138eff955510512ea2"></a>
static const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeffect__manager.html#a4624932b0a8215138eff955510512ea2">EFFECT_NULL</a> = 0</td></tr>
<tr class="memdesc:a4624932b0a8215138eff955510512ea2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Index of the null plugin, guaranteed to always exist. <br /></td></tr>
<tr class="separator:a4624932b0a8215138eff955510512ea2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a8e0e7af28ef77c08c5b37e13886bc78f"><td class="memItemLeft" align="right" valign="top"><a id="a8e0e7af28ef77c08c5b37e13886bc78f"></a>
std::vector&lt; struct <a class="el" href="structeffect__manager_1_1plugin.html">plugin</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classeffect__manager.html#a8e0e7af28ef77c08c5b37e13886bc78f">plugins</a></td></tr>
<tr class="memdesc:a8e0e7af28ef77c08c5b37e13886bc78f"><td class="mdescLeft">&#160;</td><td class="mdescRight">List of all plugins loaded. <br /></td></tr>
<tr class="separator:a8e0e7af28ef77c08c5b37e13886bc78f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This class loads external effects compiled as shared objects (<code>.so</code> files on Linux) and dynamically loads them at startup.</p>
<p>Each shared object is required to export two external symbols, with C linkage:</p>
<div class="fragment"><div class="line"><a class="code" href="structeffect.html">effect</a> *plugin_create(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> rate); <span class="comment">//This function is passed the current sample rate and returns a pointer to a new effect instance.</span></div>
</div><!-- fragment --><div class="fragment"><div class="line"><span class="keywordtype">void</span> plugin_destroy(<a class="code" href="structeffect.html">effect</a> *e); <span class="comment">//This function is passed a pointer to an effect and deletes the effect instance.</span></div>
</div><!-- fragment --><p>Optionally if the inherited class is named <code>plugin</code> the macro <code>PLUGIN_API</code> (defined in <a class="el" href="effect_8h_source.html">effect.h</a>) can instead be used if inserted at the end of the file.</p>
<p><br  />
Example:</p>
<p>A sample command line to compile a plugin (on Linux) is the following: <code>g++ -fPIC -shared plugin.cpp -o plugin.so</code></p>
<p>The <code>Makefile</code> in the effects directory will build any <code></code>.cpp file in this way.</p>
<dl class="section warning"><dt>Warning</dt><dd>Ensure that the effects created by this class are destroyed before this class, as when this class is destoryed it unloads any plugins. Meaning that any references or pointers to created effects will become invalid and can segfault the application. </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ae86ee71fd2700a0d0fc960b970f5e424"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae86ee71fd2700a0d0fc960b970f5e424">&#9670;&nbsp;</a></span>effect_manager()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">effect_manager::effect_manager </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>ext</em> = <code>&quot;.so&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Searches the given path looking for plugins with the given file extension, attempting to load them when found.</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::runtime_error</td><td>If searching the given path failed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>String containing path to a directory to load plugins from. </td></tr>
    <tr><td class="paramname">ext</td><td>String containing the file extension to search for (optional: defaults to <code>.so</code>). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="aab56e8682b974fdacd34d90c3d79a8ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab56e8682b974fdacd34d90c3d79a8ac">&#9670;&nbsp;</a></span>operator()()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt; <a class="el" href="structeffect.html">effect</a>, plugin_dtor_t &gt; effect_manager::operator() </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>rate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns a reference to a new instance of an effect.</p>
<dl class="section note"><dt>Note</dt><dd>The effect instance is wrapped in a <code>unique_ptr</code> with a custom destructor ensuring RAII semantics so the effect is deleted when it falls out of scope.</dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::runtime_error</td><td>If idx is out of range. </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">idx</td><td>Index of effect to create (0 &lt;= idx &lt; <a class="el" href="classeffect__manager.html#a356319edbab2dbf47baba524e477060b" title="Number of loaded plugins.">size()</a>). </td></tr>
    <tr><td class="paramname">rate</td><td>Sample rate to pass to effect. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a356319edbab2dbf47baba524e477060b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a356319edbab2dbf47baba524e477060b">&#9670;&nbsp;</a></span>size()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int effect_manager::size </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the number of plugins loaded plus the null effect.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">uint</td><td>Number of effects. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="effect__manager_8h_source.html">effect_manager.h</a></li>
<li>effect_manager.cpp</li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="astructeffect_html"><div class="ttname"><a href="structeffect.html">effect</a></div><div class="ttdoc">Abstract class representing a audio effect.</div><div class="ttdef"><b>Definition:</b> effect.h:72</div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classeffect__manager.html">effect_manager</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
